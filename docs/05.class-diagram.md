# ğŸ›’ E-Commerce Class Diagram
## â™»ï¸ ê³µìœ  ì»¤ë„ (Shared Kernel)
```mermaid
classDiagram
    class BaseEntity {
        <<abstract>>
        - id Long
        - createdAt ZonedDateTime
        - updatedAt ZonedDateTime
        - deletedAt ZonedDateTime
        + guard() void
        + delete() void
        + restore() void
        - prePersist() void
        - preUpdate() void
    }

    class Money {
        <<valueobject>>
        - amount BigDecimal
        - currency String
        + getAmount() BigDecimal
        + getCurrency() String
        + plus(money Money) Money
        + minus(money Money) Money
    }
```
### ğŸ—ï¸ BaseEntity
- `BaseEntity`ëŠ” ëª¨ë“  ì—”í‹°í‹°ê°€ ìƒì†í•˜ëŠ” ì¶”ìƒ í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
- `id`ëŠ” ê° ì—”í‹°í‹°ì˜ ê³ ìœ  ì‹ë³„ìì…ë‹ˆë‹¤.
- `createdAt`, `updatedAt`, `deletedAt`ëŠ” ê°ê° ìƒì„±, ìˆ˜ì •, ì‚­ì œ ì‹œê°ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
- `guard()` ë©”ì„œë“œëŠ” ì—”í‹°í‹°ì˜ ë¬´ê²°ì„±ì„ ê²€ì‚¬í•©ë‹ˆë‹¤.
- `delete()` ë©”ì„œë“œëŠ” ì—”í‹°í‹°ë¥¼ ë…¼ë¦¬ì ìœ¼ë¡œ ì‚­ì œí•©ë‹ˆë‹¤.
- `restore()` ë©”ì„œë“œëŠ” ë…¼ë¦¬ì ìœ¼ë¡œ ì‚­ì œëœ ì—”í‹°í‹°ë¥¼ ë³µì›í•©ë‹ˆë‹¤.
- `prePersist()`ì™€ `preUpdate()` ë©”ì„œë“œëŠ” `JPA`ì˜ ë¼ì´í”„ì‚¬ì´í´ ì½œë°± ë©”ì„œë“œë¡œ, ì—”í‹°í‹°ê°€ ì €ì¥ë˜ê±°ë‚˜ ì—…ë°ì´íŠ¸ë˜ê¸° ì „ì— í˜¸ì¶œë©ë‹ˆë‹¤.

### ğŸ’° Money
- `Money`ëŠ” ê¸ˆì•¡ê³¼ í†µí™”ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê°’ ê°ì²´ì…ë‹ˆë‹¤.
- `amount`ëŠ” ê¸ˆì•¡ì„ ë‚˜íƒ€ë‚´ë©°, `BigDecimal` íƒ€ì…ìœ¼ë¡œ ì •ì˜ë©ë‹ˆë‹¤.
- `currency`ëŠ” í†µí™”ë¥¼ ë‚˜íƒ€ë‚´ë©°, `String` íƒ€ì…ìœ¼ë¡œ ì •ì˜ë©ë‹ˆë‹¤.
- `getAmount()` ë©”ì„œë“œëŠ” ê¸ˆì•¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.
- `getCurrency()` ë©”ì„œë“œëŠ” í†µí™”ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
- `plus(money Money)` ë©”ì„œë“œëŠ” ë‘ ê¸ˆì•¡ì„ ë”í•œ ìƒˆë¡œìš´ `Money` ê°ì²´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
- `minus(money Money)` ë©”ì„œë“œëŠ” ë‘ ê¸ˆì•¡ì„ ëº€ ìƒˆë¡œìš´ `Money` ê°ì²´ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

## ğŸ·ï¸ ë°”ìš´ë””ë“œ ì»¨í…ìŠ¤íŠ¸ (Bounded Contexts)
### ğŸ‘¤ ì‚¬ìš©ì BC (Identity Bounded Context)
```mermaid
classDiagram
    class UserId {
        <<valueobject>>
        - value String
        + getValue() String
    }
    
    class Email {
        <<valueobject>>
        - value String
        + getValue() String
    }

    class Gender {
        <<enumeration>>
        + MALE
        + FEMALE
    }
    
    class Money {
        <<valueobject>>
        ...
    }

    class PointHistoryType {
        <<enumeration>>
        + CHARGE
        + USE
        + CANCEL
    }

    class Users {
        + userId UserId
        + email Email
        + gender Gender
        + birthDate Date
        + guard() void ~~override~~
    }

    class Points {
        + userId UserId
        + balance Money
        + charge(amount Money) void
        + use(amount Money) void
        + guard() void ~~override~~
    }

    class PointHistory {
        + userId UserId
        + type PointHistoryType
        + amount Money
        + balanceAfter Money
        + referenceId String
        + guard() void ~~override~~
    }
    
    Users --> UserId : vo
    Users --> Email : vo
    Users --> Gender : enum
    Points --> UserId : vo
    Points --> Money : vo
    PointHistory --> UserId : vo
    PointHistory --> PointHistoryType : enum
    PointHistory --> Money : vo
    Users ..> Points : reference by userId
    Users ..> PointHistory : reference by userId
```

### ğŸ›ï¸ ì¹´íƒˆë¡œê·¸ BC (Catalog Bounded Context)
```mermaid
classDiagram
    class BrandId {
        <<valueobject>>
        - value String
        + getValue() String
    }

    class UniSku {
        <<valueobject>>
        - value String
        + getValue() String
    }

    class Sku {
        <<valueobject>>
        - value String
        + getValue() String
    }
    
    class Money {
        <<valueobject>>
        ...
    }
    
    class Quantity {
        <<valueobject>>
        - value Long
        + getValue() Long
        + plus(q:Quantity) Quantity
        + minus(q:Quantity) Quantity
        + isZero() Boolean
    }

    class ProductStatus {
        <<enumeration>>
        + CREATED
        + ON_SALE
        + SOLD_OUT
        + DISCONTINUED
    }

    class Brands {
        + brandId BrandId
        + name String
        + description String
        + guard() void ~~override~~
    }

    class Products {
        + uniSku UniSku
        + brandId BrandId
        + name String
        + description String
        + price Money
        + favoriteCount Long
        + status ProductStatus
        + options List~ProductOptions~
        + guard() void ~~override~~
    }

    class ProductOptions {
        + sku Sku
        + color String
        + size String
        + price Money
        + guard() void ~~override~~
    }

    class Inventory {
        + sku Sku
        + available Quantity
        + reserved Quantity
        + version Long
        + guard() void ~~override~~
        + reserve(quantity Quantity) void
        + release(quantity Quantity) void
        + increase(quantity Quantity) void
        + decrease(quantity Quantity) void
    }
    
    Brands --> BrandId : vo
    Brands ..> Products : reference by brandId
    Products --> UniSku : vo
    Products --> BrandId : vo
    Products --> Money : vo
    Products --> ProductStatus : enum
    Products "1" --> "1..*" ProductOptions : contains
    ProductOptions --> Sku : vo
    ProductOptions --> Money : vo
    ProductOptions ..> Inventory : reference by sku
    Inventory --> Sku : vo
    Inventory --> Quantity : vo
```

### â¤ï¸ ì†Œì…œ BC (Social Bounded Context)
```mermaid
classDiagram
    class UserId {
        <<valueobject>>
        ...
    }
    
    class UniSku {
        <<valueobject>>
        ...
    }
    
    class User {
        + userId UserId
        ...
    }
    
    class Products {
        + uniSku UniSku
        ...
    }
    
    class ProductFavorites {
        + userId UserId
        + uniSku UniSku
        + guard() void ~~override~~
    }
    
    ProductFavorites --> UserId : vo
    Products ..> ProductFavorites : reference by uniSku
    User ..> ProductFavorites : reference by userId
    User --> UserId : vo
    Products --> UniSku : vo
    ProductFavorites --> UniSku : vo
```

### ğŸ›’ ì¹´íŠ¸ BC (Cart Bounded Context)
```mermaid
classDiagram
    class UserId {
        <<valueobject>>
        ...
    }
    
    class Money {
        <<valueobject>>
        ...
    }

    class Sku {
        <<valueobject>>
        ...
    }

    class Quantity {
        <<valueobject>>
        ...
    }

    class Carts {
        + userId UserId
        + items List~CartItems~
        + guard() void ~~override~~
        + clear() void
        + add(items List~CartItems~) void
        + remove(sku Sku) void
        + change(sku Sku, quantity Quantity) void
    }

    class CartItems {
        + sku Sku
        + unitPrice Money
        + quantity Quantity
        + guard() void ~~override~~
        + increase(quantity Quantity) void
        + decrease(quantity Quantity) void
    }

    Carts --> UserId : vo
    Carts "1" --> "0..*" CartItems : contains
    CartItems --> Sku : vo
    CartItems --> Quantity : vo
    CartItems --> Money : vo
```

### ğŸ§¾ ì»¤ë¨¸ìŠ¤ BC (Commerce Bounded Context)
```mermaid
classDiagram
    class OrderNo {
        <<valueobject>>
        - value String
        + getValue() String
    }

    class OrderStatus {
        <<enumeration>>
        + CREATED
        + PENDING
        + COMPLETED
        + CANCELED
    }

    class UserId {
        <<valueobject>>
        ...
    }

    class Money {
        <<valueobject>>
        ...
    }
    
    class Sku {
        <<valueobject>>
        ...
    }
    
    class Quantity {
        <<valueobject>>
        ...
    }

    class PaymentStatus {
        <<enumeration>>
        + REQUESTED
        + SUCCEEDED
        + FAILED
    }

    class Orders {
        + orderNo OrderNo
        + userId UserId
        + items List~OrderItems~
        + productTotal Money
        + discountTotal Money
        + orderTotal Money
        + status OrderStatus
        + guard() void ~~override~~
        + confirm() void
        + cancel() void
    }

    class OrderItems {
        + sku Sku
        + unitPrice Money
        + quantity Quantity
        + guard() void ~~override~~
    }

    class Payments {
        + orderNo OrderNo
        + status PaymentStatus
        + paidAmount Money
        + approvedAt ZonedDateTime
        + guard() void ~~override~~
        + appreove() void
    }
    
    Payments --> OrderNo : vo
    Orders --> OrderNo : vo
    Orders --> OrderStatus : enum
    Payments --> PaymentStatus : enum
    OrderItems --> Money : vo
    Orders --> Money : vo
    Payments --> Money : vo
    Orders --> UserId : vo
    Orders ..> Payments : reference by orderNo
    Orders "1" --> "1..*" OrderItems : contains
    OrderItems --> Sku : vo
    OrderItems --> Quantity : vo
```

### ğŸ‰ í”„ë¡œëª¨ì…˜ BC (Promotion Bounded Context)
```mermaid
classDiagram
    class PromotionStatus {
       <<enumeration>>
       + ACTIVE
       + PAUSED
       + EXPIRED
    }
    
    class PromotionId {
        <<valueobject>>
        - value String
        + getValue() String
    }
    
    
    class PromotionKind {
         <<enumeration>>
         + COUPON
    }
    
    class DiscountType {
       <<enumeration>>
       + FIXED
       + RATE
    }
    
    
    class Percentage {
       <<valueobject>>
       - value int
       + getValue() int
    }
        
    class CouponStatus {
       <<enumeration>>
       + UNUSED
       + USED
       + EXPIRED
    }
    
    class CouponCode {
       <<valueobject>>
       - value String
       + getValue() String
    }

    class CouponsId {
        <<valueobject>>
        - value String
        + getValue() String
    }

    class DiscountPolicy {
        + type DiscountType
        + amount Money
        + percentage Percentage
        + guard() void ~~override~~
        + calculate(original Money) Money
    }
    
    class Promotion {
         + promotionId PromotionId
         + name String
         + kind PromotionKind
         + validFrom ZonedDateTime
         + validTo ZonedDateTime
         + description String
         + status PromotionStatus
    }
    
    class Coupons {
       + couponId CouponsId
       + promotionId PromotionId
       + policy: DiscountPolicy
       + guard() void ~~override~~
       + issue() void
    }
    
    class UserCoupons {
       + code CouponCode
       + couponId CouponsId
       + userId UserId
       + status CouponStatus
       + issuedAt ZonedDateTime
       + usedAt ZonedDateTime
       + guard() void ~~override~~
       + use() void
    }
    
    class Money {
       <<valueobject>>
       ...
    }
    
    class UserId {
       <<valueobject>>
       ...
    }
    
    Coupons --> DiscountPolicy : vo
    DiscountPolicy --> Percentage : vo
    Coupons --> CouponsId : vo
    UserCoupons --> CouponsId : vo
    Promotion --> PromotionId : vo
    Coupons --> PromotionId : vo
    Promotion ..> Coupons : reference by promotionId
    Promotion --> PromotionKind : enum
    Promotion --> PromotionStatus : enum
    Coupons ..> UserCoupons : reference by couponId
    DiscountPolicy --> DiscountType : enum
    DiscountPolicy --> Money : vo
    UserCoupons --> CouponCode : vo
    UserCoupons --> UserId : vo
    UserCoupons --> CouponStatus : enum
```
