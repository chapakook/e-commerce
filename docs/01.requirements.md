# 🛒 E-Commerce Requirements
## 📌 배경 (Background)
**좋아요** 누르고, **쿠폰** 쓰고, 포인트로 **결제**하는 **감성 이커머스**.
내가 좋아하는 브랜드의 상품들을 한 번에 담아 주문합니다.
유저 행동은 랭킹과 추천으로 연결됩니다.~~~~

## 📚 목차 (Index)
- [👤 유저 (Users)](#-유저-users)
- [💰 포인트 (Points)](#-포인트-points)
- [🏷️ 브랜드 (Brands)](#-브랜드-brands)
- [🛍️ 상품 (Products)](#-상품-products)
- [❤️ 좋아요 (Like)](#-좋아요-like)
- [🧾 주문/결재 (Orders/Payments)](#-주문결재-orderspayments)
- [🛒 장바구니 (Cart)](#-장바구니-cart)
- [🎟️ 쿠폰 (Coupons)](#-쿠폰-coupons)

## 👤 유저 (Users)
### 🎯 목표 (Goals)
- `회원가입`, `프로필 조회` 기능을 제공합니다.
- 유저는 **고유한** `ID`와 `이메일`을 기반으로 식별됩니다.

### ❌ 목표가 아닌 것 (Not Goals)
- `인증`/`인가` 기능은 범위에 포함하지 않습니다.
- 소셜 네트워크 기능(`팔로우`, `메시징`)은 포함하지 않습니다.
- 유저 상태(`활성`, `비활성`, `탈퇴`)는 관리하지 않습니다.

### ✅ 기능적 요구사항 (Functional Requirements)
#### [✍️ 회원가입]
- [ ] 유저는 `ID`, `성별`, `생년월일`, `이메일`을 제공하여 회원가입할 수 있습니다.
- [ ] `ID`와 `이메일`은 전역에서 ***유일***해야 합니다.
- [ ] ***입력값 누락*** 시 가입에 실패합니다.
- [ ] ***이메일 형식이 잘못된 경우*** 가입에 실패합니다.

#### [🔍 프로필 조회]
- [ ] 유저는 자신의 프로필을 조회할 수 있습니다.
- [ ] 없는 유저 조회 시 `404 Not Found`를 반환합니다.

## 💰 포인트 (Points)
### 🎯 목표 (Goals)
- 포인트 `조회`, `내역 조회`, `충전` 기능을 제공합니다.

### ❌ 목표가 아닌 것 (Not Goals)
- `포인트 사용`은 주문 과정에서 자동으로 처리되며, 별도의 사용 API는 제공되지 않습니다.
- **포인트 환전**(현금 출금) 기능은 이번 범위에 포함하지 않습니다.
- **포인트 만료 정책**(유효기간)은 이번 범위에서 다루지 않습니다.
- **복잡한 적립 규칙**(`프로모션`, `이벤트 적립`)은 이번 범위에서 다루지 않습니다.
- 포인트는 현금처럼 사용되며, 환불 시에도 동일하게 처리됩니다.

### ✅ 기능적 요구사항 (Functional Requirements)
#### [🔍 포인트 조회]
- [ ] 유저ID를 헤더(`X-USER-ID`)로 전달하여 현재 포인트 잔액을 조회할 수 있습니다.
- [ ] 없는 유저가 조회 요청 시 `404 Not Found`를 반환합니다.
- [ ] 조회시 포인트가 없는 경우 `0`을 반환합니다.

#### [📜 포인트 내역 조회]
- [ ] 유저ID를 헤더(`X-USER-ID`)로 전달하여 자신의 포인트 내역을 조회할 수 있습니다.
- [ ] 없는 유저가 조회 요청 시 `404 Not Found`를 반환합니다.
- [ ] 내역은 발생일시 기준 내림차순으로 정렬되어야 합니다.
- [ ] 페이징을 지원해야 합니다. (`page`, `size`)
- [ ] 내역이 없는 경우 빈 배열을 반환합니다.
- [ ] 너무 많은 내역 조회 요청 시 `400 Bad Request`를 반환합니다. (`size > 10000`)

#### [💳 포인트 충전]
- [ ] 유저ID를 헤더(`X-USER-ID`)로 전달하여 포인트를 충전할 수 있습니다.
- [ ] 충전 성공 시 잔액이 증가하고, 내역이 기록됩니다.
- [ ] 충전 금액은 `10000`원 이상이어야 합니다.
- [ ] 충전 금액이 `0` 이하인 경우 충전에 실패합니다.
- [ ] 없는 유저가 충전 요청 시 `404 Not Found`를 반환합니다.
- [ ] 동시성 문제로 인해 잔액이 잘못 계산되지 않아야 합니다.

## 🏷️ 브랜드 (Brands)
### 🎯 목표 (Goals)
- 브랜드 `등록`, `상세 조회` 기능을 제공합니다.

### ❌ 목표가 아닌 것 (Not Goals)
- 브랜드 `수정`, `삭제` 기능은 이번 범위에 포함하지 않습니다.
- 브랜드 `이미지` 업로드 기능은 이번 범위에 포함하지 않습니다.
- 브랜드 `팔로우` 기능은 이번 범위에 포함하지 않습니다.
- 브랜드 `랭킹`, `추천` 기능은 이번 범위에 포함하지 않습니다.
- 브랜드 `목록 조회` 기능은 이번 범위에 포함하지 않습니다.

### ✅ 기능적 요구사항 (Functional Requirements)
#### [➕ 브랜드 등록]
- [ ] 브랜드는 `이름`, `설명`을 포함하여 등록할 수 있습니다.
- [ ] 브랜드 이름은 전역에서 ***유일***해야 합니다.
- [ ] 입력값 누락 시 등록에 실패합니다.
- [ ] 너무 긴 이름(`50자 초과`) 또는 설명(`500자 초과`)은 등록에 실패합니다.
- [ ] 브랜드 등록 성공 시 고유한 `브랜드 ID`를 반환합니다.
- [ ] 브랜드는 등록 후 수정 또는 삭제할 수 없습니다.

#### [🔍 브랜드 상세 조회]
- [ ] 브랜드 ID로 브랜드 상세 정보를 조회할 수 있습니다.
- [ ] 없는 브랜드 조회 시 `404 Not Found`를 반환합니다.
- [ ] 브랜드 상세 정보에는 `브랜드 ID`, `이름`, `설명`, `등록일시`가 포함됩니다.

## 🛍️ 상품 (Products)
### 🎯 목표 (Goals)
- 상품 `등록`, `목록 조회`, `상세 조회` 기능을 제공합니다.
- 상품은 특정 브랜드에 속하며, 옵션(색상/사이즈 등) 조합으로 구분됩니다.
- 재고는 상품 옵션 단위에서 관리됩니다.

### ❌ 목표가 아닌 것 (Not Goals)
- 상품 `삭제`, `리뷰`, `평점` 기능은 포함하지 않습니다.
- 상품 `수정` 기능은 이번 범위에 포함하지 않습니다.
- 상품 `카테고리` 분류 기능은 이번 범위에 포함하지 않습니다
- 상품 `이미지` 업로드 기능은 이번 범위에 포함하지 않습니다.

### ✅ 기능적 요구사항 (Functional Requirements)
#### [➕ 상품 등록]
- [ ] 상품은 유효한 `브랜드 ID`에만 등록할 수 있습니다.
- [ ] `상품명`은 1자 이상 100자 이내여야 합니다.
- [ ] `가격`은 0 이상의 정수여야 합니다.
- [ ] 입력값 누락 시 등록에 실패합니다.
- [ ] 옵션이 없는 상품은 등록할 수 없습니다.

#### [📋 상품 목록 조회]
- [ ] 상품 목록은 페이징을 지원해야 합니다. (`page`, `size`)
- [ ] 브랜드별 필터링을 지원해야 합니다. (`brandId`)
- [ ] 정렬 기능을 제공합니다. (`latest`, `price_asc`, `likes_desc`)
- [ ] 없는 브랜드 필터링 시 빈 배열을 반환합니다.
- [ ] 너무 많은 상품 조회 요청 시 `400 Bad Request`를 반환합니다. (`size > 10000`)
- [ ] 상품이 없는 경우 빈 배열을 반환합니다.
- [ ] 재고가 `0`인 상품도 목록에 포함됩니다.
- [ ] 조회시 상품 옵션이 여러개인 경우 `가격이 가장 낮은 옵션`의 가격을 대표 가격으로 노출합니다.

#### [🔍 상품 상세 조회]
- [ ] `상품 ID`로 상품의 상세 정보를 조회할 수 있습니다.
- [ ] 없는 상품 조회 시 `404 Not Found`를 반환합니다.

## ❤️ 좋아요 (Like)
### 🎯 목표 (Goals)
- 상품 `좋아요`, `좋아요 취소`, `내가 좋아요한 상품 목록 조회` 기능을 제공합니다.
- 유저는 상품에 `좋아요`를 누르고 취소할 수 있습니다.

### ❌ 목표가 아닌 것 (Not Goals)
- 옵션(색상/사이즈) 단위의 좋아요 기능은 포함하지 않습니다.

### ✅ 기능적 요구사항 (Functional Requirements)
#### [❤️ 상품 좋아요]
- [ ] 유저는 헤더(`X-USER-ID`)로 자신의 ID를 전달하여 특정 상품에 좋아요를 누를 수 있습니다.
- [ ] 없는 유저가 좋아요 요청 시 `404 Not Found`를 반환합니다.
- [ ] 없는 상품에 좋아요 요청 시 `404 Not Found`를 반환합니다.
- [ ] 이미 좋아요한 상품에 대해 다시 좋아요 요청 시 좋아요 수는 증가하지 않습니다.
- [ ] 좋아요 성공 시 `200 OK`를 반환합니다.
- [ ] 좋아요 성공 시 해당 상품의 좋아요 수가 증가합니다.
- [ ] 좋아요 성공 시 유저가 해당 상품에 좋아요를 눌렀다는 기록이 남습니다.
- [ ] 동시성 문제로 인해 좋아요 수가 잘못 계산되지 않아야 합니다.

#### [💔 상품 좋아요 취소]
- [ ] 유저는 헤더(`X-USER-ID`)로 자신의 ID를 전달하여 특정 상품에 대한 좋아요를 취소할 수 있습니다.
- [ ] 없는 유저가 좋아요 취소 요청 시 `404 Not Found`를 반환합니다.
- [ ] 없는 상품에 좋아요 취소 요청 시 `404 Not Found`를 반환합니다.
- [ ] 좋아요하지 않은 상품에 대해 좋아요 취소 요청 시 좋아요 수는 감소하지 않습니다.
- [ ] 좋아요 취소 성공 시 `200 OK`를 반환합니다.
- [ ] 좋아요 취소 성공 시 해당 상품의 좋아요 수가 감소합니다.
- [ ] 좋아요 취소 성공 시 유저가 해당 상품에 좋아요를 누르지 않았다는 기록이 남습니다.
- [ ] 좋아요 수는 음수가 될 수 없습니다.
- [ ] 동시성 문제로 인해 좋아요 수가 잘못 계산되지 않아야 합니다.

#### [📋 내가 좋아요한 상품 목록 조회]
- [ ] 유저는 헤더(`X-USER-ID`)로 자신의 ID를 전달하여 자신이 좋아요한 상품 목록을 조회할 수 있습니다.
- [ ] 없는 유저가 조회 요청 시 `404 Not Found`를 반환합니다.
- [ ] 목록은 최신 좋아요순으로 정렬되어야 합니다.
- [ ] 페이징을 지원해야 합니다. (`page`, `size`)
- [ ] 좋아요한 상품이 없는 경우 빈 배열을 반환합니다.
- [ ] 너무 많은 상품 조회 요청 시 `400 Bad Request`를 반환합니다. (`size > 10000`)
- [ ] 상품 목록 조회 시 각 상품의 총 좋아요 수(`totalLikes`)가 포함됩니다.

## 🧾 주문/결재 (Orders/Payments)
### 🎯 목표 (Goals)
- 주문 `요청`, `목록 조회`, `상세 조회` , `취소` 기능을 제공합니다.
- 주문 요청시 `가주문`이 생성 됩니다.
- 결재 성공 시 `가주문`이 `확정 주문`으로 변경됩니다.
- 결재 실패 시 `가주문`은 `취소`됩니다.
- 주문은 여러 상품(옵션 조합 단위)으로 구성될 수 있습니다.
- 결재는 PG사 결재, 포인트 결재 두 가지 방식을 지원합니다.

### ❌ 목표가 아닌 것 (Not Goals)
- 배송(`택배사 연동`, `배송 추적`)은 이번 범위에 포함하지 않습니다.
- 주문 `반품` / `교환` 프로세스는 포함하지 않습니다.
- 주문 `수정` 기능은 이번 범위에 포함하지 않습니다.

### ✅ 기능적 요구사항 (Functional Requirements)
#### [🛒 주문 요청]
- [ ] 유저는 헤더(`X-USER-ID`)로 자신의 ID를 전달하여 주문을 요청할 수 있습니다.
- [ ] 없는 유저가 주문 요청 시 `404 Not Found`를 반환합니다.
- [ ] 주문 요청 시 최소 한 개 이상의 상품(옵션 조합 단위)을 포함해야 합니다.
- [ ] 없는 상품이나 옵션 조합으로 주문 요청 시 `400 Bad Request`를 반환합니다.
- [ ] 재고가 부족한 상품이 포함된 주문 요청 시 `400 Bad Request`를 반환합니다.
- [ ] 주문 요청 시 `총 주문 금액`이 계산되어야 합니다.
- [ ] 주문 요청 성공 시 `가주문` 상태로 주문이 생성되고, `201 Created`를 반환합니다.

#### [📋 주문 목록 조회]
- [ ] 유저는 헤더(`X-USER-ID`)로 자신의 ID를 전달하여 자신의 주문 목록을 조회할 수 있습니다.
- [ ] 없는 유저가 조회 요청 시 `404 Not Found`를 반환합니다.
- [ ] 목록은 최신 주문순으로 정렬되어야 합니다.
- [ ] 페이징을 지원해야 합니다. (`page`, `size`)
- [ ] 주문이 없는 경우 빈 배열을 반환합니다.
- [ ] 너무 많은 주문 조회 요청 시 `400 Bad Request`를 반환합니다. (`size > 10000`)

#### [🔍 주문 상세 조회]
- [ ] 유저는 헤더(`X-USER-ID`)로 자신의 ID와 주문번호를 전달하여 자신의 특정 주문 상세 정보를 조회할 수 있습니다.
- [ ] 없는 유저가 조회 요청 시 `404 Not Found`를 반환합니다.
- [ ] 없는 주문 조회 시 `404 Not Found`를 반환합니다.
- [ ] 다른 유저의 주문 조회 시 `403 Forbidden`을 반환합니다.

#### [❌ 주문 취소]
- [ ] 유저는 헤더(`X-USER-ID`)로 자신의 ID와 주문번호를 전달하여 자신의 특정 주문을 취소할 수 있습니다.
- [ ] 없는 유저가 취소 요청 시 `404 Not Found`를 반환합니다.
- [ ] 없는 주문 취소 요청 시 `404 Not Found`를 반환합니다.
- [ ] 다른 유저의 주문 취소 요청 시 `403 Forbidden`을 반환합니다.
- [ ] 이미 `확정 주문` 상태인 주문은 취소할 수 없습니다.
- [ ] 주문 취소 성공 시 주문 상태가 `취소`로 변경되고, 재고가 복구됩니다.
- [ ] 주문 취소 성공 시 `200 OK`를 반환합니다.

## 🛒 장바구니 (Cart)
### 🎯 목표 (Goals)
- 장바구니 `조회`, `추가`, `수정`, `삭제`, `주문` 기능을 제공합니다.
- 장바구니는 유저별로 관리됩니다.
- 장바구니에 담긴 상품은 옵션(색상/사이즈 등) 조합 단위로 구분됩니다.
- 장바구니에 담긴 상품의 수량은 최대 50개까지 허용됩니다.
- 장바구니에 담긴 상품은 주문 요청 시 자동으로 제거됩니다.
- 목록 조회시 상품의 할인 정보가 포함됩니다.
- 주문시 재고가 부족한 상품은 주문할 수 없습니다.
- 장바구니는 최대 1000개 상품까지 담을 수 있습니다.

### ❌ 목표가 아닌 것 (Not Goals)
- 장바구니 `선택`, `전체 선택` 기능은 이번 범위에 포함하지 않습니다.
- 장바구니 `이동` 기능(예: 위시리 스트로 이동)은 이번 범위에 포함하지 않습니다.
- 장바구니 `공유` 기능은 이번 범위에 포함하지 않습니다.
- 장바구니 `저장/불러오기` 기능은 이번 범위에 포함하지 않습니다.
- 로그인하지 않은 유저의 장바구니(예: 쿠키 기반)는 이번 범위에 포함하지 않습니다.

### ✅ 기능적 요구사항 (Functional Requirements)
#### [📋 장바구니 조회]
- [ ] 유저는 헤더(`X-USER-ID`)로 자신의 ID를 전달하여 자신의 장바구니를 조회할 수 있습니다.
- [ ] 없는 유저가 조회 요청 시 `404 Not Found`를 반환합니다.
- [ ] 장바구니가 비어있는 경우 빈 배열을 반환합니다.
- [ ] 장바구니에 담긴 각 상품에 대해 `상품 ID`, `상품명`, `옵션`, `수량`, `가격`, `할인 정보`가 포함됩니다.
- [ ] 너무 많은 상품 조회 요청 시 `400 Bad Request`를 반환합니다. (`size > 10000`)
- [ ] 장바구니에 담긴 상품이 없는 경우 빈 배열을 반환합니다.

#### [➕ 장바구니에 상품 추가]
- [ ] 유저는 헤더(`X-USER-ID`)로 자신의 ID를 전달하여 장바구니에 상품을 추가할 수 있습니다.
- [ ] 없는 유저가 추가 요청 시 `404 Not Found`를 반환합니다.
- [ ] 없는 상품이나 옵션 조합으로 추가 요청 시 `400 Bad Request`를 반환합니다.
- [ ] 수량이 `0` 이하인 경우 추가에 실패합니다.
- [ ] 장바구니에 담긴 동일 상품/옵션 조합이 이미 존재하면 수량이 증가합니다.
- [ ] 장바구니에 담긴 동일 상품/옵션 조합의 수량이 `50`개를 초과할 수 없습니다.
- [ ] 추가 성공 시 `200 OK`를 반환합니다.
- [ ] 장바구니에 담긴 상품이 `1000`개를 초과할 수 없습니다.

#### [✏️ 장바구니 상품 수량 수정]
- [ ] 유저는 헤더(`X-USER-ID`)로 자신의 ID를 전달하여 장바구니에 담긴 특정 상품의 수량을 수정할 수 있습니다.
- [ ] 없는 유저가 수정 요청 시 `404 Not Found`를 반환합니다.
- [ ] 없는 상품이나 옵션 조합으로 수정 요청 시 `400 Bad Request`를 반환합니다.
- [ ] 수량이 `0` 이하인 경우 해당 상품은 장바구니에서 제거됩니다.
- [ ] 수량이 `50`개를 초과할 수 없습니다.
- [ ] 수정 성공 시 `200 OK`를 반환합니다.

#### [🗑️ 장바구니에서 상품 삭제]
- [ ] 유저는 헤더(`X-USER-ID`)로 자신의 ID를 전달하여 장바구니에 담긴 특정 상품을 삭제할 수 있습니다.
- [ ] 없는 유저가 삭제 요청 시 `404 Not Found`를 반환합니다.
- [ ] 없는 상품이나 옵션 조합으로 삭제 요청 시 `400 Bad Request`를 반환합니다.
- [ ] 삭제 성공 시 `200 OK`를 반환합니다.

#### [🛒 장바구니 상품으로 주문 요청]
- [ ] 유저는 헤더(`X-USER-ID`)로 자신의 ID와 장바구니에 담긴 상품을 전달하여 주문을 요청할 수 있습니다.
- [ ] 없는 유저가 주문 요청 시 `404 Not Found`를 반환합니다.
- [ ] 장바구니에 담긴 상품이 없는 경우 주문 요청 시 `400 Bad Request`를 반환합니다.
- [ ] 재고가 부족한 상품이 포함된 주문 요청 시 `400 Bad Request`를 반환합니다.
- [ ] 주문 요청 성공 시 장바구니에서 해당 상품이 제거되고, `201 Created`를 반환합니다.

## 🎟️ 쿠폰 (Coupons)
### 🎯 목표 (Goals)
- 쿠폰 `발급`, `목록 조회`, `상세 조회` 기능을 제공합니다.
- 유저는 보유 쿠폰을 주문 시 적용하여 결제 금액을 할인받을 수 있습니다.
- 쿠폰은 `정액 할인`, `정률 할인` 두 가지 유형을 지원합니다.
- 쿠폰은 한 주문에 한 장만 적용할 수 있습니다.
- 쿠폰은 특정 기간 동안만 유효합니다.
- 쿠폰은 `사용 후`에는 다시 사용할 수 없습니다.
- 쿠폰이 사용된 주문이 취소되면 쿠폰은 다시 유효 상태로 변경됩니다.
- 동일한 쿠폰은 한 유저가 한 번만 발급받을 수 있습니다.

### ❌ 목표가 아닌 것 (Not Goals)
- 쿠폰 양도/거래는 포함하지 않습니다.
- 쿠폰 해제는 포함하지 않습니다.
- 쿠폰 중복 적용(스태킹) 및 자동 최적할인 탐색은 포함하지 않습니다.
- 외부 제휴/정산 로직은 포함하지 않습니다.
- 쿠폰 `발급 취소` 기능은 이번 범위에 포함하지 않습니다.

### ✅ 기능적 요구사항 (Functional Requirements)
#### [🎫 쿠폰 발급]
- [ ] 유저는 헤더(`X-USER-ID`)로 자신의 ID와 쿠폰 ID를 전달하여 쿠폰을 발급받을 수 있습니다.
- [ ] 없는 유저가 쿠폰 발급 요청 시 `404 Not Found`를 반환합니다.
- [ ] 동일한 쿠폰은 한 유저가 한 번만 발급받을 수 있습니다.
- [ ] 쿠폰 발급 성공 시 `201 Created`를 반환합니다.

#### [📋 쿠폰 목록 조회]
- [ ] 유저는 헤더(`X-USER-ID`)로 자신의 ID를 전달하여 자신이 보유한 쿠폰 목록을 조회할 수 있습니다.
- [ ] 없는 유저가 조회 요청 시 `404 Not Found`를 반환합니다.
- [ ] 목록은 최신 발급순으로 정렬되어야 합니다.
- [ ] 페이징을 지원해야 합니다. (`page`, `size`)
- [ ] 쿠폰이 없는 경우 빈 배열을 반환합니다.

#### [🔍 쿠폰 상세 조회]
- [ ] 유저는 헤더(`X-USER-ID`)로 자신의 ID와 쿠폰 ID를 전달하여 자신의 특정 쿠폰 상세 정보를 조회할 수 있습니다.
- [ ] 없는 유저가 조회 요청 시 `404 Not Found`를 반환합니다.
- [ ] 없는 쿠폰 조회 시 `404 Not Found`를 반환합니다.
- [ ] 다른 유저의 쿠폰 조회 시 `403 Forbidden`을 반환합니다.
