# ğŸ›’ E-Commerce API Specification

## ğŸ“š API ëª…ì„¸ì„œ (API Specification)
- [ğŸ‘¤ ìœ ì € (Users)](#-ìœ ì €-users)
- [ğŸ’° í¬ì¸íŠ¸ (Points)](#-í¬ì¸íŠ¸-points)
- [ğŸ·ï¸ ë¸Œëœë“œ (Brands)](#-ë¸Œëœë“œ-brands)
- [ğŸ›ï¸ ìƒí’ˆ (Products)](#-ìƒí’ˆ-products)
- [â¤ï¸ ì¢‹ì•„ìš” (Like)](#-ì¢‹ì•„ìš”-like)
- [ğŸ§¾ ì£¼ë¬¸ / ê²°ì¬ (Orders & Payments)](#-ì£¼ë¬¸--ê²°ì¬-orders--payments)
- [ğŸ›’ ì¥ë°”êµ¬ë‹ˆ (Cart)](#-ì¥ë°”êµ¬ë‹ˆ-cart)
- [ğŸŸï¸ ì¿ í° (Coupons)](#-ì¿ í°-coupons)

## ğŸ‘¤ ìœ ì € (Users)
### íšŒì›ê°€ì…
#### Endpoint
- POST `/api/v1/users`

#### Headers
- `Accept`: `application/json`
- `Content-Type`: `application/json`

#### Request Body
```json
{
  "userId": "chasu",
  "gender": "F",  
  "birthDate": "1996-12-23",
  "email": "chasu@chasu.com"
}
```
- `userId` : 3~20ì, ì˜ë¬¸/ìˆ«ì, ì „ì—­ ìœ ì¼
- `gender` : M(ë‚¨), F(ì—¬),
- `birthDate` : `yyyy-MM-dd`, í˜„ì¬ ë‚ ì§œ ê¸°ì¤€ ê³¼ê±°ì—¬ì•¼ í•¨
- `email` : ì´ë©”ì¼ í˜•ì‹, ìµœëŒ€ 100ì, ì „ì—­ ìœ ì¼

#### Response
- `201 Created`

#### Errors
- `400 Bad Request`: ìš”ì²­ê°’ ëˆ„ë½, ì´ë©”ì¼ í˜•ì‹ ì˜¤ë¥˜
- `409 Conflict`: `userId` ë˜ëŠ” `email` ì¤‘ë³µ

### í”„ë¡œí•„ ì¡°íšŒ
#### Endpoint
- GET `/api/v1/users/me`

#### Headers 
- `X-USER-ID`: `string`
- `Accept`: `application/json`
- `Content-Type`: `application/json`

#### Response
- `200 OK`
```json
{
  "id": "chasu",
  "gender": "F",
  "birthDate": "1996-12-23",
  "email": "chasu@chasu.com"
}
```

#### Errors
- `404 Not Found`: ìœ ì € ì—†ìŒ

## ğŸ’° í¬ì¸íŠ¸ (Points)
### í¬ì¸íŠ¸ ì¶©ì „
#### Endpoint
- POST `/api/v1/points/charge`

#### Headers
- `X-USER-ID`: `string`
- `Accept`: `application/json`
- `Content-Type`: `application/json`

#### Request Body
```json
{
  "amount": 10000,
  "requestId": "550e8400-e29b-41d4-a716-446655440000"
}
```
- `amount`: ì¶©ì „ ê¸ˆì•¡ (ì •ìˆ˜, 0 ì´ˆê³¼ í•„ìˆ˜)
- `requestId`: ë©±ë“± í‚¤ (UUID ê¶Œì¥, ì¤‘ë³µ ìš”ì²­ ë°©ì§€)

#### Response
- `200 OK`
```json
{
  "balance": 15000
}
```

#### Errors
- `400 Bad Request`: `amount â‰¤ 0`, í•„ë“œ ëˆ„ë½/í˜•ì‹ ì˜¤ë¥˜
- `409 Conflict`: ë™ì¼ `requestId`ë¡œ ì´ë¯¸ ì²˜ë¦¬ë¨

### í¬ì¸íŠ¸ ì¡°íšŒ
#### Endpoint
- GET `/api/v1/points`

#### Headers
- `X-USER-ID`: `string`
- `Accept`: `application/json`

#### Response
- `200 OK`
```json
{
  "balance": 15000,
  "retrievedAt": "2025-09-04T12:00:00Z"
}
```

#### Errors
- `400 Bad Request`: ì˜ëª»ëœ í—¤ë”(`X-USER-ID` ëˆ„ë½/ë¹ˆê°’)

### í¬ì¸íŠ¸ ë‚´ì—­ ì¡°íšŒ
#### Endpoint
- GET `/api/v1/points/history?page=0&size=20`

#### Headers
- `X-USER-ID`: `string`
- `Accept`: `application/json`

#### Response
- `200 OK`
```json
{
  "content": [
    {
      "type": "CHARGE",
      "amount": 10000,
      "balance": 15000,
      "orderId": null,
      "occurredAt": "2025-09-04T12:00:00Z"
    },
    {
      "type": "USE",
      "amount": 5000,
      "balance": 10000,
      "orderId": "ORD-001",
      "occurredAt": "2025-09-04T12:30:00Z"
    }
  ],
  "page": 0,
  "size": 20,
  "totalElements": 2,
  "totalPages": 1
}
```

#### Errors
- `400 Bad Request`: ì˜ëª»ëœ íŒŒë¼ë¯¸í„° (`page` < 0, `size` â‰¤ 0 ë“±)

## ğŸ·ï¸ ë¸Œëœë“œ (Brands)
### ë¸Œëœë“œ ë“±ë¡
#### Endpoint
- POST `/api/v1/brands`

#### Headers
- `Accept`: `application/json`
- `Content-Type`: `application/json`

#### Request Body
```json
{
  "name": "ë¸Œëœë“œëª…"
}
```
- `name`: ê¸¸ì´ 2~50, ì „ì—­ ìœ ì¼

#### Response
- `201 Created`

#### Errors
- `400 Bad Request`: `name` ëˆ„ë½/ê¸¸ì´ ì œì•½ ìœ„ë°˜
- `409 Conflict`: ë™ì¼ `name` ì´ë¯¸ ì¡´ì¬

### ë¸Œëœë“œ ìƒì„¸ ì¡°íšŒ
#### Endpoint
- GET `/api/v1/brands/{brandId}?include=options`

#### Headers
- `Accept`: `application/json`

#### Response
- `200 OK`
```json
{
  "id": "BR-001",
  "name": "ë¸Œëœë“œëª…",
  "products": [
    {
      "uniSku": "UNI-01H8ZK7E9ABC",
      "name": "ë‚˜ì´í‚¤ ë“œë¼ì´í• í‹°ì…”ì¸ ",
      "price": 29900,
      "totalLikes": 12,
      "options": [
        { "sku": "SKU-01H8-1MWH", "color": "White", "size": "M", "price": 29900, "stock": 10 }
      ]
    }
  ]
}
```

#### Errors
- `404 Not Found`: `brandId`ì— í•´ë‹¹í•˜ëŠ” ë¸Œëœë“œ ì—†ìŒ

## ğŸ›ï¸ ìƒí’ˆ (Products)
### ìƒí’ˆ ë“±ë¡
#### Endpoint
- POST `/api/v1/products`

#### Headers
- `Accept`: `application/json`
- `Content-Type`: `application/json`

#### Request Body
```json
{
  "brandId": "BR-001",
  "name": "ë‚˜ì´í‚¤ ë“œë¼ì´í• í‹°ì…”ì¸ ",
  "description": "ê²½ëŸ‰/í¡ìŠµ",
  "images": ["https://.../1.jpg"],
  "options": [
    { "color": "White", "size": "M", "price": 29900, "initialStock": 10 },
    { "color": "White", "size": "L", "price": 29900, "initialStock": 8 },
    { "color": "Black", "size": "M", "price": 31900, "initialStock": 5 }
  ]
}
```
- `brandId` ìœ íš¨
- `name` 2~100ì
- `options â‰¥ 1`, `(color,size)` ì¡°í•© ìœ ì¼
- `price â‰¥ 0`, `initialStock â‰¥ 0`

#### Response
- `201 Created`
  - `Headers`: `Location: /api/v1/products/{uniSku}`

#### Errors
- `400 Bad Request`: í•„ë“œ ëˆ„ë½/í˜•ì‹/ê¸¸ì´/ìŒìˆ˜ ê¸ˆì•¡Â·ì¬ê³ 
- `404 Not Found`: `brandId` ì—†ìŒ
- `409 Conflict`: ì˜µì…˜ ì¡°í•© ì¤‘ë³µ

> ìƒì„± í›„ ì˜µì…˜ë³„ skuê°€ í•„ìš”í•˜ë©´ GET /api/v1/products/{uniSku}?include=optionsë¡œ ì¡°íšŒí•˜ì„¸ìš”.

### ìƒí’ˆ ëª©ë¡ ì¡°íšŒ
#### Endpoint
- GET `/api/v1/products?page=0&size=20&sort=LATEST&brandId=BR-001&include=options`

#### Headers
- `Accept`: `application/json`

#### Query Params
- `brandId` (`optional`) : íŠ¹ì • ë¸Œëœë“œ í•„í„°
- `page`: `default` 0, 
- `size`: `default` 20
- `sort`: `LATEST` | `PRICE_ASC` | `PRICE_DESC` | `LIKES_DESC`
- `include=options` (`optional`): ê° ìƒí’ˆì˜ SKU ìš”ì•½ í¬í•¨

#### Response
- `200 OK`
```json
{
  "content": [
    {
      "uniSku": "UNI-01H8ZK7E9ABC",
      "brandId": "BR-001",
      "name": "ë‚˜ì´í‚¤ ë“œë¼ì´í• í‹°ì…”ì¸ ",
      "price": 29900,
      "totalLikes": 12,
      "options": [
        { "sku": "SKU-01H8-1MWH", "color": "White", "size": "M", "price": 29900, "stock": 10 }
      ]
    }
  ],
  "page": 0, "size": 20, "totalElements": 1, "totalPages": 1
}
```

#### Errors
- `400 Bad Request`: ì˜ëª»ëœ íŒŒë¼ë¯¸í„°

### ìƒí’ˆ ìƒì„¸ ì¡°íšŒ
#### Endpoint
- GET `/api/v1/products/{uniSku}?include=options`

#### Headers
- `Accept`: `application/json`

#### Query Params
- `include=options` ë¯¸ì „ë‹¬ ì‹œ `options` ìƒëµ(ìš”ì•½ ì‘ë‹µ)

#### Response
- `200 OK`
```json
{
  "uniSku": "UNI-01H8ZK7E9ABC",
  "brandId": "BR-001",
  "name": "ë‚˜ì´í‚¤ ë“œë¼ì´í• í‹°ì…”ì¸ ",
  "description": "ê²½ëŸ‰/í¡ìŠµ",
  "images": ["https://.../1.jpg"],
  "price": 29900,
  "totalLikes": 12,
  "options": [
    { "sku": "SKU-01H8-1MWH", "color": "White", "size": "M", "price": 29900, "stock": 10 },
    { "sku": "SKU-01H8-1LWH", "color": "White", "size": "L", "price": 29900, "stock": 8 },
    { "sku": "SKU-01H8-1MBK", "color": "Black", "size": "M", "price": 31900, "stock": 5 }
  ]
}
```
#### Errors
- `404 Not Found`: `{uniSku}` ì—†ìŒ

## â¤ï¸ ì¢‹ì•„ìš” (Like)
### ì¢‹ì•„ìš” ë“±ë¡
#### Endpoint
- POST `/api/v1/like/products/{uniSku}`

#### Headers
- `X-USER-ID`: `string`
- `Accept`: `application/json`

#### Response
- `200 OK`

```json
{
  "liked": true,
  "productUniSku": "UNI-01H8ZK7E9ABC",
  "totalLikes": 13
}
```

#### Errors
- `400 Bad Request`: `X-USER-ID` ëˆ„ë½/ë¹ˆ ê°’, `uniSku` í˜•ì‹ ì˜¤ë¥˜
- `404 Not Found`: í•´ë‹¹ `uniSku` ìƒí’ˆ ì—†ìŒ

> ì´ë¯¸ ì¢‹ì•„ìš” ìƒíƒœì—¬ë„ `200 OK`ë¡œ ë™ì¼ ì‘ë‹µ

### ì¢‹ì•„ìš” ì·¨ì†Œ
#### Endpoint
- DELETE `/api/v1/like/products/{uniSku}`

#### Headers
- `X-USER-ID`: `string`
- `Accept`: `application/json`

#### Response
- `200 OK`
```json
{
  "liked": false,
  "productUniSku": "UNI-01H8ZK7E9ABC",
  "totalLikes": 12
}
```

#### Errors
- `400 Bad Request`: `X-USER-ID` ëˆ„ë½/ë¹ˆ ê°’, `uniSku` í˜•ì‹ ì˜¤ë¥˜
- `404 Not Found`: í•´ë‹¹ `uniSku` ìƒí’ˆ ì—†ìŒ

> ì´ë¯¸ ì·¨ì†Œ ìƒíƒœì—¬ë„ `200 OK`ë¡œ ë™ì¼ ì‘ë‹µ. ì´ ì¢‹ì•„ìš” ìˆ˜ëŠ” 0 ë¯¸ë§Œ ë¶ˆê°€.

### ë‚´ê°€ ì¢‹ì•„ìš”í•œ ìƒí’ˆ ëª©ë¡ ì¡°íšŒ
#### Endpoint
- GET `/api/v1/like/products?page=0&size=20`

#### Headers
- `X-USER-ID`: `string`
- `Accept`: `application/json`

#### Response
- `200 OK`

```json
{
  "content": [
    {
      "likedAt": "2025-09-04T12:00:00Z",
      "name": "ë‚˜ì´í‚¤ ë“œë¼ì´í• í‹°ì…”ì¸ ",
      "price": 29900,
      "totalLikes": 12,
      "uniSku": "UNI-01H8ZK7E9ABC"
    }
  ],
  "page": 0,
  "size": 20,
  "totalElements": 1,
  "totalPages": 1
}
```

#### Errors
- `400 Bad Request`: ì˜ëª»ëœ íŒŒë¼ë¯¸í„°(`page < 0`, `size â‰¤ 0`)
- `400 Bad Request`: `X-USER-ID` ëˆ„ë½/ë¹ˆ ê°’

## ğŸ§¾ ì£¼ë¬¸ / ê²°ì¬ (Orders & Payments)
### ì£¼ë¬¸ ìš”ì²­
#### Endpoint
- POST `/api/v1/orders`

#### Headers
- `X-USER-ID`: `string`
- `Accept`: `application/json`
- `Content-Type`: `application/json`

#### Request Body
```json
{
  "items": [
    { "sku": "SKU-01H8-1MWH", "quantity": 2 },
    { "sku": "SKU-01H8-1LWH", "quantity": 1 }
  ],
  "couponId": "CPN-001"
}
```
- `items â‰¥ 1`
- `quantity â‰¥ 1`
- `sku`: ìœ íš¨/íŒë§¤ê°€ëŠ¥

#### Response
- `201 Created`
```json
{
  "orderId": "ORD-001",
  "status": "CREATED",
  "amounts": { "itemsTotal": 89700, "couponDiscount": 5000, "payable": 84700 },
  "items": [
    { "sku": "SKU-01H8-1MWH", "quantity": 2, "unitPrice": 29900, "subtotal": 59800 },
    { "sku": "SKU-01H8-1LWH", "quantity": 1, "unitPrice": 29900, "subtotal": 29900 }
  ],
  "createdAt": "2025-09-04T12:00:00Z"
}
```

#### Errors
- `400 Bad Request`: ë³¸ë¬¸ ì˜¤ë¥˜(`quantity â‰¤ 0` ë“±)
- `404 Not Found`: ì¡´ì¬í•˜ì§€ ì•ŠëŠ” `sku` / `couponId`
- `409 Conflict`: ì¬ê³  ë¶€ì¡±, ì¿ í° ì‚¬ìš© ë¶ˆê°€

### ì£¼ë¬¸ ëª©ë¡ ì¡°íšŒ
#### Endpoint
- GET `/api/v1/orders?page=0&size=20`

#### Headers
- `X-USER-ID`: `string`
- `Accept`: `application/json`

#### Response
- `200 OK`
```json
{
  "content": [
    {
      "orderId": "ORD-001",
      "status": "CREATED",
      "amounts": { "itemsTotal": 89700, "couponDiscount": 5000, "payable": 84700 },
      "createdAt": "2025-09-04T12:00:00Z"
    }
  ],
  "page": 0, "size": 20, "totalElements": 1, "totalPages": 1
}
```

### ì£¼ë¬¸ ìƒì„¸ ì¡°íšŒ
#### Endpoint
- GET `/api/v1/orders/{orderId}`

#### Headers
- `X-USER-ID`: `string`
- `Accept`: `application/json`

#### Response
- `200 OK`
```json
{
  "orderId": "ORD-001",
  "status": "CREATED",
  "amounts": { "itemsTotal": 89700, "couponDiscount": 5000, "payable": 84700 },
  "items": [
    { "sku": "SKU-01H8-1MWH", "quantity": 2, "unitPrice": 29900, "subtotal": 59800 },
    { "sku": "SKU-01H8-1LWH", "quantity": 1, "unitPrice": 29900, "subtotal": 29900 }
  ],
  "createdAt": "2025-09-04T12:00:00Z"
}
```

#### Errors
- `404 Not Found`: `orderId` ì—†ìŒ

## ğŸ›’ ì¥ë°”êµ¬ë‹ˆ (Cart)
### ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€
#### Endpoint
- POST `/api/v1/cart/items`

#### Headers
- `Accept`: `application/json`
- `Content-Type`: `application/json`

#### Request Body
```json
{ 
  "sku": "SKU-01H8-1MWH", 
  "quantity": 2
}
```
- `quantity â‰¥ 1`, ë™ì¼ `sku` ì¡´ì¬ ì‹œ ìˆ˜ëŸ‰ ì¦ê°€

#### Response
- `200 OK`
```json
{
  "cartId": "CART-001",
  "items": [
    { "itemId": "CI-1", "sku": "SKU-01H8-1MWH", "quantity": 2, "unitPrice": 29900, "subtotal": 59800 }
  ],
  "totalAmount": 59800
}
```

#### Errors
- `404 Not Found`: `sku` ì—†ìŒ/íŒë§¤ë¶ˆê°€
- `400 Bad Request`: ìˆ˜ëŸ‰ ì˜¤ë¥˜

### ì¥ë°”êµ¬ë‹ˆ ì¡°íšŒ
#### Endpoint
- GET `/api/v1/cart`

#### Headers
- `X-USER-ID`: `string`
- `Accept`: `application/json`

#### Response
- `200 OK`
```json
{
  "cartId": "CART-001",
  "items": [
    { "itemId": "CI-1", "sku": "SKU-01H8-1MWH", "quantity": 2, "unitPrice": 29900, "subtotal": 59800 }
  ],
  "totalAmount": 59800
}
```

### ì¥ë°”êµ¬ë‹ˆ ìˆ˜ì •
#### Endpoint
- PATCH `/api/v1/cart/items/{itemId}`

#### Headers
- `Accept`: `application/json`
- `Content-Type`: `application/json`

#### Request Body
```json
{ "quantity": 3 }
```
- `quantity â‰¤ 0` í•´ë‹¹ í•­ëª© ì‚­ì œ

#### Response
- `200 OK`

### ì¥ë°”êµ¬ë‹ˆ ì‚­ì œ
#### Endpoint
- DELETE `/api/v1/cart/items/{itemId}`

#### Headers
- `X-USER-ID`: `string`

#### Response
- `204 No Content`

## ğŸŸï¸ ì¿ í° (Coupons)
### ì¿ í° ë°œê¸‰
#### Endpoint
- POST `/api/v1/coupons/issue`

#### Headers
- `X-USER-ID`: `string`
- `Accept`: `application/json`
- `Content-Type`: `application/json`

#### Request Body
```json
{
  "templateCode": "WELCOME10"
}
```
- `templateCode` ìœ íš¨í•´ì•¼ í•¨, ìœ ì €ë‹¹ ë™ì¼ í…œí”Œë¦¿ 1ì¥

#### Response
- `200 OK`
```json
{
  "couponId": "CPN-001",
  "code": "WELCOME10",
  "type": "fixed",
  "value": 1000,
  "validFrom": "2025-09-01T00:00:00Z",
  "validUntil": "2025-09-30T23:59:59Z",
  "issuedAt": "2025-09-04T12:00:00Z",
  "usable": true
}
```

#### Errors
- `400 Bad Request`: `templateCode` ëˆ„ë½/í˜•ì‹ ì˜¤ë¥˜
- `404 Not Found`: ì¡´ì¬í•˜ì§€ ì•ŠëŠ” `templateCode`
- `409 Conflict`: ë™ì¼ í…œí”Œë¦¿ìœ¼ë¡œ ì´ë¯¸ ë°œê¸‰ë¨(ìœ ì €ë‹¹ 1ì¥)

> í• ì¸ ë°©ì‹: ì •ì•¡(`fixed`), ì •ìœ¨(`rate`)
> ì ìš© ë²”ìœ„: ì „ ìƒí’ˆ(`all`)
> ì •ìœ¨(`rate`)ì€ ì› ë‹¨ìœ„ ì ˆì‚¬

### ì¿ í° ì¡°íšŒ
#### Endpoint
- GET `/api/v1/coupons/{couponId}`

#### Headers
- `X-USER-ID`: `string`
- `Accept`: `application/json`

#### Response
- `200 OK`
```json
{
  "couponId": "CPN-001",
  "code": "WELCOME10",
  "type": "fixed",
  "value": 1000,
  "validFrom": "2025-09-01T00:00:00Z",
  "validUntil": "2025-09-30T23:59:59Z",
  "status": "ISSUED",
  "usable": true,
  "usedAt": null,
  "appliedOrderId": null
}
```

#### Errors
- `400 Bad Request`: `couponId` í˜•ì‹ ì˜¤ë¥˜
- `404 Not Found`: ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜(ë˜ëŠ” ë³¸ì¸ ì†Œìœ  ì•„ë‹˜) ì¡°íšŒ ë¶ˆê°€í•œ ì¿ í°

> ì£¼ë¬¸ ì‹œ ì¿ í° ì ìš©ì€ ì£¼ë¬¸ ìƒì„± APIì—ì„œ `couponId`(ë˜ëŠ” `code`)ë¡œ ì „ë‹¬í•˜ë©°, ë™ì‹œ ì ìš© 1ê°œë§Œ í—ˆìš©.